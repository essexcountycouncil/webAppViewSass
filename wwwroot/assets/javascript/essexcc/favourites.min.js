define(["jquery","matchboxconfig"],function(e,t){var r=0,a=!0,o=!1,i=function(){e(".add-favourite a").on("click",function(){var t,o,i=e(this).attr("data-slug"),n=e(this).attr("data-type");t=i,o=n,e.get("/cookies/add?slug="+t+"&cookieType="+o,function(e,t){a&&(r++,s())}),e(".add-favourite").addClass("hidden"),e(".remove-favourite").removeClass("hidden"),e(".print-favourite-group-item").removeClass("hidden")}),e(".remove-favourite a").on("click",function(){var i,n,u=e(this).attr("data-slug"),d=e(this).attr("data-type");i=u,n=d,e.get("/cookies/remove?slug="+i+"&cookieType="+n,function(n,u){a&&(r--,s()),o&&(e("#item-card-"+i).remove(),0===e(".group-card").length&&(e("#no-results").show(),e("#favourites-list").hide()),t.Init())}),e(".add-favourite").removeClass("hidden"),e(".remove-favourite").addClass("hidden"),e(".print-favourite-group-item").addClass("hidden")})},n=function(){var t=function(){var e=window.location.href.toLowerCase().replace("http://","").replace("https://","").split("/");if(e.length>1){var t=e[1];if(e.length>2&&("favourites"===e[2]||"manage"===e[2]))return"favourites"===e[2]&&(o=!0),a=!1,""}switch(t){case"groups":case"organisations":return"EssexWebapp.Models.Group"}return""}();""!==t&&u("favourites")&&(void 0!==e.parseJSON(unescape(u("favourites")))[t]&&e.get("/groups/favourites/get-count",function(e){a&&(r=e,s())}))},s=function(){0==r?e(".favourites-bar").hide():e(".favourites-bar").length>0&&(e(".count",".favourites-bar").html(r),e(".favourites-bar").css("display","block"))},u=function(e){for(var t=e+"=",r=document.cookie.split(";"),a=0;a<r.length;a++){for(var o=r[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""};return{Init:function(){i(),n()}}});