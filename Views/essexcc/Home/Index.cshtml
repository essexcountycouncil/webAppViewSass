@using EssexWebapp.ViewModels
@model HomepageViewModel
@inject EssexWebapp.Utils.ViewHelpers viewHelper

@{
    ViewData["Title"] = "Welcome to Essex County Council";
    ViewData["og:title"] = "Welcome to Essex County Council";
    Layout = "../Shared/_LayoutHome.cshtml";
}


@*css overides to request images per device*@

@section BackgroundImage
    {
    @*@Html.Partial("ScaleImageByDevice",new Image("homepage-hero", Model.HomepageContent.BackgroundImage))*@
}
@section CarouselBackgroundImage
    {
    @*
        @{ int counter = 1; }
        @foreach (var carouselContent in Model.HomepageContent.CarouselContents)
        {
            @Html.Partial("ScaleImageByDevice", new Image("webcast-" + counter, carouselContent.Image))
            counter++;
        }
    *@
}

<div class="search-background" aria-label="Searching essex.gov.uk">
    <div class="overlay"></div>
    
        <div class="search-container">
            <div class="greeting">
                <h1>Welcome to Essex</h1>
            </div>
            
                @Html.Partial("Search", new Tuple<string, string, string>("cludo-search-hero-form", "Search essex.gov.uk", "cludo-search-bar"))
           

                @* @Html.Partial("FeaturedTasks", Model.HomepageContent.FeaturedTasks)*@
            
        </div>
    
</div>
@*<div class="button-bar-background">
    <div class="button-bar-container">
        @Html.Partial("ButtonBar", Model.HomepageContent.FeaturedTasks)
    </div>
</div>*@

<main id="content">
    <div class="container">

        <div class="main only">
            <section class="content">
                @if (Model.HomepageContent.Alerts != null)
                {
                    foreach (var alert in Model.HomepageContent.Alerts)
                    {
                        <div>
                            @Html.Partial("GlobalAlert", alert)
                        </div>
                    }
                }

                <h2 class="content-heading">Essex County Council Services</h2>
                @Html.Partial("GenericFeaturedItemList", Model.HomepageContent.GenericItemList)

                @*@Html.Partial("HomePageImpact")*@
                @Html.Partial("Carousel", Model.HomepageContent.CarouselContents)

                @*<div class="section-break-lg"></div>*@


                @if (Model.FeaturedNews != null)
                {
                    <h2>News</h2>
                    
                        <div class="previews news">
                            @foreach (var item in Model.FeaturedNews)
                            {
                                <div class="preview">
                                    @if(item.Image != "")
                                    {
                                    <img src=@item.Image alt="@item.Title" width="200" height="112">
                                    }

                                    <h3 class="sub-section-heading"><a href="/news/@item.Slug">@item.Title</a></h3>
                                    <p>@item.Teaser</p>
                                    <p class="meta">@Html.Partial("FormattedDate", item.SunriseDate)</p>
                                </div>
                            }

                        </div>
                    
                }


            </section>
        </div>

    </div>
</main>
<section class="function">
    <div class="signup-background" role="form">
        <div class="signup">

            @*@Html.Partial("EmailSubscribe", "")*@
            @Html.Partial("HomePageEmailSubscribe", "")
        </div>
    </div>
</section>

@*
    <div class="grid-100 grid-parent">
        @Html.Partial("Carousel", Model.HomepageContent.CarouselContents)
    </div>
*@

<script type="text/javascript">
    require(['alerts'],
        function (alerts) {
            alerts.Init();
        });
</script>